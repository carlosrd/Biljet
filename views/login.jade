extends layout

block contentBlock

    form(action='/login', method='post', id="form_login")
        div
            input(type='text', placeholder='Usuario').field_username
        div
            input(type='password', placeholder='Contrase√±a').field_password
        div
            a(title='Login').btn.btn-large.submit Login
            //- input(type='submit', value='Log In')

block javascript
    script(type='text/javascript')
        $(document).ready(function() {
            $('.submit').click(function () {
                var hashPass = CryptoJS.MD5($('#form_login .field_password').val()).toString();
                $('#form_login .field_password').val(hashPass);

                var data = {
                    username: $("#form_login .field_username").val(),
                    password: hashPass,
                }

                $.ajax({
                    type: "POST",
                    url: "/login",
                    data: data,
                    statusCode: {
                        200: function() {
                            window.location.href= "/";
                        }
                    },
                    error: function() {
                        alert("BAD Auth");
                    }
                    //- success: function () {
                    //-     window.location.href = '/';
                    //- }
                });            
            });
        });